(this["webpackJsonpreact-social"]=this["webpackJsonpreact-social"]||[]).push([[0],{108:function(e,t,s){},109:function(e,t,s){},110:function(e,t,s){},111:function(e,t,s){},112:function(e,t,s){},113:function(e,t,s){},114:function(e,t,s){},115:function(e,t,s){},116:function(e,t,s){},117:function(e,t,s){},118:function(e,t,s){},119:function(e,t,s){},124:function(e,t,s){"use strict";s.r(t);var a=s(1),c=s.n(a),r=s(63),n=s.n(r),i=(s(76),s(138)),o=s(139),l=s(140),u=s(141),j=s(19),d=s(5),b=s(37),p=s(32),m=function(e,t){switch(t.type){case"LOGIN_START":return{user:null,isFetching:!0,error:!1};case"LOGIN_SUCCESS":return{user:t.payload,isFetching:!1,error:!1};case"LOGIN_FAILURE":return{user:null,isFetching:!1,error:!0};case"FOLLOW":return Object(p.a)(Object(p.a)({},e),{},{user:Object(p.a)(Object(p.a)({},e.user),{},{followings:[].concat(Object(b.a)(e.user.followings),[t.payload])})});case"UNFOLLOW":return Object(p.a)(Object(p.a)({},e),{},{user:Object(p.a)(Object(p.a)({},e.user),{},{followings:e.user.followings.filter((function(e){return e!==t.payload}))})});default:return e}},h=s(0),O={user:JSON.parse(localStorage.getItem("user"))||null,isFetching:!1,error:!1},x=Object(a.createContext)(O),f=function(e){var t=e.children,s=Object(a.useReducer)(m,O),c=Object(d.a)(s,2),r=c[0],n=c[1];return Object(a.useEffect)((function(){localStorage.setItem("user",JSON.stringify(r.user))}),[r.user]),Object(h.jsx)(x.Provider,{value:{user:r.user,isFetching:r.isFetching,error:r.error,dispatch:n},children:t})};function v(){var e=Object(a.useContext)(x).user,t="https://messen.herokuapp.com/images/";return Object(h.jsxs)("div",{className:"topbarContainer",children:[Object(h.jsx)("div",{className:"topbarLeft",children:Object(h.jsx)(j.b,{to:"/",style:{textDecoration:"none"},children:Object(h.jsx)("span",{className:"logo",children:"Message"})})}),Object(h.jsx)("div",{className:"topbarCenter",children:Object(h.jsxs)("div",{className:"searchbar",children:[Object(h.jsx)(i.a,{className:"searchIcon"}),Object(h.jsx)("input",{placeholder:"Search for friend, post or video",className:"searchInput"})]})}),Object(h.jsxs)("div",{className:"topbarRight",children:[Object(h.jsxs)("div",{className:"topbarLinks",children:[Object(h.jsx)("span",{className:"topbarLink",children:"Homepage"}),Object(h.jsx)("span",{className:"topbarLink",children:"Timeline"})]}),Object(h.jsxs)("div",{className:"topbarIcons",children:[Object(h.jsxs)("div",{className:"topbarIconItem",children:[Object(h.jsx)(o.a,{}),Object(h.jsx)("span",{className:"topbarIconBadge",children:"1"})]}),Object(h.jsxs)("div",{className:"topbarIconItem",children:[Object(h.jsx)(l.a,{}),Object(h.jsx)("span",{className:"topbarIconBadge",children:"2"})]}),Object(h.jsxs)("div",{className:"topbarIconItem",children:[Object(h.jsx)(u.a,{}),Object(h.jsx)("span",{className:"topbarIconBadge",children:"1"})]})]}),Object(h.jsx)(j.b,{to:"/profile/".concat(e.username),children:Object(h.jsx)("img",{src:e.profilePicture?t+e.profilePicture:t+"person/noAvatar.png",alt:"",className:"topbarImg"})})]})]})}s(85);var g=s(142),N=s(143),I=s(144),w=s(145),k=s(146),y=s(147),L=s(148),C=s(149),S=[{id:1,profilePicture:"person/1.jpeg",username:"Safak Kocaoglu"},{id:2,profilePicture:"person/2.jpeg",username:"Janell Shrum"},{id:3,profilePicture:"person/3.jpeg",username:"Alex Durden"},{id:4,profilePicture:"person/4.jpeg",username:"Dora Hawks"},{id:5,profilePicture:"person/5.jpeg",username:"Thomas Holden"},{id:6,profilePicture:"person/6.jpeg",username:"Shirley Beauchamp"},{id:7,profilePicture:"person/7.jpeg",username:"Travis Bennett"},{id:8,profilePicture:"person/8.jpeg",username:"Kristen Thomas"},{id:9,profilePicture:"person/9.jpeg",username:"Gary Duty"},{id:10,profilePicture:"person/10.jpeg",username:"Safak Kocaoglu"}];s(86);function F(e){var t=e.user;return Object(h.jsxs)("li",{className:"sidebarFriend",children:[Object(h.jsx)("img",{className:"sidebarFriendImg",src:"https://messen.herokuapp.com/images/"+t.profilePicture,alt:""}),Object(h.jsx)("span",{className:"sidebarFriendName",children:t.username})]})}function P(){return Object(h.jsx)("div",{className:"sidebar",children:Object(h.jsxs)("div",{className:"sidebarWrapper",children:[Object(h.jsxs)("ul",{className:"sidebarList",children:[Object(h.jsxs)("li",{className:"sidebarListItem",children:[Object(h.jsx)(g.a,{className:"sidebarIcon"}),Object(h.jsx)("span",{className:"sidebarListItemText",children:"Feed"})]}),Object(h.jsxs)("li",{className:"sidebarListItem",children:[Object(h.jsx)(l.a,{className:"sidebarIcon"}),Object(h.jsx)("span",{className:"sidebarListItemText",children:"Chats"})]}),Object(h.jsxs)("li",{className:"sidebarListItem",children:[Object(h.jsx)(N.a,{className:"sidebarIcon"}),Object(h.jsx)("span",{className:"sidebarListItemText",children:"Videos"})]}),Object(h.jsxs)("li",{className:"sidebarListItem",children:[Object(h.jsx)(I.a,{className:"sidebarIcon"}),Object(h.jsx)("span",{className:"sidebarListItemText",children:"Groups"})]}),Object(h.jsxs)("li",{className:"sidebarListItem",children:[Object(h.jsx)(w.a,{className:"sidebarIcon"}),Object(h.jsx)("span",{className:"sidebarListItemText",children:"Bookmarks"})]}),Object(h.jsxs)("li",{className:"sidebarListItem",children:[Object(h.jsx)(k.a,{className:"sidebarIcon"}),Object(h.jsx)("span",{className:"sidebarListItemText",children:"Questions"})]}),Object(h.jsxs)("li",{className:"sidebarListItem",children:[Object(h.jsx)(y.a,{className:"sidebarIcon"}),Object(h.jsx)("span",{className:"sidebarListItemText",children:"Jobs"})]}),Object(h.jsxs)("li",{className:"sidebarListItem",children:[Object(h.jsx)(L.a,{className:"sidebarIcon"}),Object(h.jsx)("span",{className:"sidebarListItemText",children:"Events"})]}),Object(h.jsxs)("li",{className:"sidebarListItem",children:[Object(h.jsx)(C.a,{className:"sidebarIcon"}),Object(h.jsx)("span",{className:"sidebarListItemText",children:"Courses"})]})]}),Object(h.jsx)("button",{className:"sidebarButton",children:"Show More"}),Object(h.jsx)("hr",{className:"sidebarHr"}),Object(h.jsx)("ul",{className:"sidebarFriendList",children:S.map((function(e){return Object(h.jsx)(F,{user:e},e.id)}))})]})})}var _=s(3),T=s.n(_),B=s(7),R=(s(88),s(150)),A=s(4),U=s.n(A),E=s(49);function D(e){var t=e.post,s=Object(a.useState)(t.likes.length),c=Object(d.a)(s,2),r=c[0],n=c[1],i=Object(a.useState)(!1),o=Object(d.a)(i,2),l=o[0],u=o[1],b=Object(a.useState)({}),p=Object(d.a)(b,2),m=p[0],O=p[1],f="https://messen.herokuapp.com/images/",v=Object(a.useContext)(x).user;Object(a.useEffect)((function(){u(t.likes.includes(v._id))}),[v._id,t.likes]),Object(a.useEffect)((function(){(function(){var e=Object(B.a)(T.a.mark((function e(){var s;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.a.get("/users?userId=".concat(t.userId));case 2:s=e.sent,O(s.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t.userId]);var g=function(){try{U.a.put("/posts/"+t._id+"/like",{userId:v._id})}catch(e){}n(l?r-1:r+1),u(!l)};return Object(h.jsx)("div",{className:"post",children:Object(h.jsxs)("div",{className:"postWrapper",children:[Object(h.jsxs)("div",{className:"postTop",children:[Object(h.jsxs)("div",{className:"postTopLeft",children:[Object(h.jsx)(j.b,{to:"/profile/".concat(m.username),children:Object(h.jsx)("img",{className:"postProfileImg",src:m.profilePicture?f+m.profilePicture:f+"person/noAvatar.png",alt:""})}),Object(h.jsx)("span",{className:"postUsername",children:m.username}),Object(h.jsx)("span",{className:"postDate",children:Object(E.a)(t.createdAt)})]}),Object(h.jsx)("div",{className:"postTopRight",children:Object(h.jsx)(R.a,{})})]}),Object(h.jsxs)("div",{className:"postCenter",children:[Object(h.jsx)("span",{className:"postText",children:null===t||void 0===t?void 0:t.desc}),Object(h.jsx)("img",{className:"postImg",src:f+t.img,alt:""})]}),Object(h.jsxs)("div",{className:"postBottom",children:[Object(h.jsxs)("div",{className:"postBottomLeft",children:[Object(h.jsx)("img",{className:"likeIcon",src:"".concat(f,"like.png"),onClick:g,alt:""}),Object(h.jsx)("img",{className:"likeIcon",src:"".concat(f,"heart.png"),onClick:g,alt:""}),Object(h.jsxs)("span",{className:"postLikeCounter",children:[r," people like it"]})]}),Object(h.jsx)("div",{className:"postBottomRight",children:Object(h.jsxs)("span",{className:"postCommentText",children:[t.comment," comments"]})})]})]})})}s(108);var W=s(151),M=s(152),G=s(153),V=s(154),q=s(155);function J(){var e=Object(a.useContext)(x).user,t="https://messen.herokuapp.com/images/",s=Object(a.useRef)(),c=Object(a.useState)(null),r=Object(d.a)(c,2),n=r[0],i=r[1],o=function(){var t=Object(B.a)(T.a.mark((function t(a){var c,r,i;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),c={userId:e._id,desc:s.current.value},!n){t.next=16;break}return r=new FormData,i=Date.now()+n.name,r.append("name",i),r.append("file",n),c.img=i,console.log(c),t.prev=9,t.next=12,U.a.post("/upload",r);case 12:t.next=16;break;case 14:t.prev=14,t.t0=t.catch(9);case 16:return t.prev=16,t.next=19,U.a.post("/posts",c);case 19:window.location.reload(),t.next=24;break;case 22:t.prev=22,t.t1=t.catch(16);case 24:case"end":return t.stop()}}),t,null,[[9,14],[16,22]])})));return function(e){return t.apply(this,arguments)}}();return Object(h.jsx)("div",{className:"share",children:Object(h.jsxs)("div",{className:"shareWrapper",children:[Object(h.jsxs)("div",{className:"shareTop",children:[Object(h.jsx)("img",{className:"shareProfileImg",src:e.profilePicture?t+e.profilePicture:t+"person/noAvatar.png",alt:""}),Object(h.jsx)("input",{placeholder:"What's in your mind "+e.username+"?",className:"shareInput",ref:s})]}),Object(h.jsx)("hr",{className:"shareHr"}),n&&Object(h.jsxs)("div",{className:"shareImgContainer",children:[Object(h.jsx)("img",{className:"shareImg",src:URL.createObjectURL(n),alt:""}),Object(h.jsx)(W.a,{className:"shareCancelImg",onClick:function(){return i(null)}})]}),Object(h.jsxs)("form",{className:"shareBottom",onSubmit:o,children:[Object(h.jsxs)("div",{className:"shareOptions",children:[Object(h.jsxs)("label",{htmlFor:"file",className:"shareOption",children:[Object(h.jsx)(M.a,{htmlColor:"tomato",className:"shareIcon"}),Object(h.jsx)("span",{className:"shareOptionText",children:"Photo or Video"}),Object(h.jsx)("input",{style:{display:"none"},type:"file",id:"file",accept:".png,.jpeg,.jpg",onChange:function(e){return i(e.target.files[0])}})]}),Object(h.jsxs)("div",{className:"shareOption",children:[Object(h.jsx)(G.a,{htmlColor:"blue",className:"shareIcon"}),Object(h.jsx)("span",{className:"shareOptionText",children:"Tag"})]}),Object(h.jsxs)("div",{className:"shareOption",children:[Object(h.jsx)(V.a,{htmlColor:"green",className:"shareIcon"}),Object(h.jsx)("span",{className:"shareOptionText",children:"Location"})]}),Object(h.jsxs)("div",{className:"shareOption",children:[Object(h.jsx)(q.a,{htmlColor:"goldenrod",className:"shareIcon"}),Object(h.jsx)("span",{className:"shareOptionText",children:"Feelings"})]})]}),Object(h.jsx)("button",{className:"shareButton",type:"submit",children:"Share"})]})]})})}s(109);function K(e){var t=e.username,s=Object(a.useState)([]),c=Object(d.a)(s,2),r=c[0],n=c[1],i=Object(a.useContext)(x).user;return Object(a.useEffect)((function(){(function(){var e=Object(B.a)(T.a.mark((function e(){var s;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,U.a.get("/posts/profile/"+t);case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,U.a.get("posts/timeline/"+i._id);case 8:e.t0=e.sent;case 9:s=e.t0,n(s.data.sort((function(e,t){return new Date(t.createdAt)-new Date(e.createdAt)})));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t,i._id]),Object(h.jsx)("div",{className:"feed",children:Object(h.jsxs)("div",{className:"feedWrapper",children:[(!t||t===i.username)&&Object(h.jsx)(J,{}),r.map((function(e){return Object(h.jsx)(D,{post:e},e._id)}))]})})}s(110),s(111);function H(e){var t=e.user;return Object(h.jsxs)("li",{className:"rightbarFriend",children:[Object(h.jsxs)("div",{className:"rightbarProfileImgContainer",children:[Object(h.jsx)("img",{className:"rightbarProfileImg",src:"https://messen.herokuapp.com/images/"+t.profilePicture,alt:""}),Object(h.jsx)("span",{className:"rightbarOnline"})]}),Object(h.jsx)("span",{className:"rightbarUsername",children:t.username})]})}var z=s(156),Q=s(157);function X(e){var t=e.user,s="https://messen.herokuapp.com/images/",c=Object(a.useState)([]),r=Object(d.a)(c,2),n=r[0],i=r[1],o=Object(a.useContext)(x),l=o.user,u=o.dispatch,b=Object(a.useState)(l.followings.includes(null===t||void 0===t?void 0:t.id)),p=Object(d.a)(b,2),m=p[0],O=p[1];Object(a.useEffect)((function(){(function(){var e=Object(B.a)(T.a.mark((function e(){var s;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.a.get("/users/friends/"+t._id);case 3:s=e.sent,i(s.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[t]);var f=function(){var e=Object(B.a)(T.a.mark((function e(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!m){e.next=7;break}return e.next=4,U.a.put("/users/".concat(t._id,"/unfollow"),{userId:l._id});case 4:u({type:"UNFOLLOW",payload:t._id}),e.next=10;break;case 7:return e.next=9,U.a.put("/users/".concat(t._id,"/follow"),{userId:l._id});case 9:u({type:"FOLLOW",payload:t._id});case 10:O(!m),e.next=15;break;case 13:e.prev=13,e.t0=e.catch(0);case 15:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),v=function(){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{className:"birthdayContainer",children:[Object(h.jsx)("img",{className:"birthdayImg",src:"assets/gift.png",alt:""}),Object(h.jsxs)("span",{className:"birthdayText",children:[Object(h.jsx)("b",{children:"Pola Foster"})," and ",Object(h.jsx)("b",{children:"3 other friends"})," have a birhday today."]})]}),Object(h.jsx)("img",{className:"rightbarAd",src:"assets/ad.png",alt:""}),Object(h.jsx)("h4",{className:"rightbarTitle",children:"Online Friends"}),Object(h.jsx)("ul",{className:"rightbarFriendList",children:S.map((function(e){return Object(h.jsx)(H,{user:e},e.id)}))})]})},g=function(){return Object(h.jsxs)(h.Fragment,{children:[t.username!==l.username&&Object(h.jsxs)("button",{className:"rightbarFollowButton",onClick:f,children:[m?"Unfollow":"Follow",m?Object(h.jsx)(z.a,{}):Object(h.jsx)(Q.a,{})]}),Object(h.jsx)("h4",{className:"rightbarTitle",children:"User information"}),Object(h.jsxs)("div",{className:"rightbarInfo",children:[Object(h.jsxs)("div",{className:"rightbarInfoItem",children:[Object(h.jsx)("span",{className:"rightbarInfoKey",children:"City:"}),Object(h.jsx)("span",{className:"rightbarInfoValue",children:t.city})]}),Object(h.jsxs)("div",{className:"rightbarInfoItem",children:[Object(h.jsx)("span",{className:"rightbarInfoKey",children:"From:"}),Object(h.jsx)("span",{className:"rightbarInfoValue",children:t.from})]}),Object(h.jsxs)("div",{className:"rightbarInfoItem",children:[Object(h.jsx)("span",{className:"rightbarInfoKey",children:"Relationship:"}),Object(h.jsx)("span",{className:"rightbarInfoValue",children:1===t.relationship?"Single":1===t.relationship?"Married":"-"})]})]}),Object(h.jsx)("h4",{className:"rightbarTitle",children:"User friends"}),Object(h.jsx)("div",{className:"rightbarFollowings",children:n.map((function(e){return Object(h.jsx)(j.b,{to:"/profile/"+e.username,style:{textDecoration:"none"},children:Object(h.jsxs)("div",{className:"rightbarFollowing",children:[Object(h.jsx)("img",{src:e.profilePicture?s+e.profilePicture:s+"person/noAvatar.png",alt:"",className:"rightbarFollowingImg"}),Object(h.jsx)("span",{className:"rightbarFollowingName",children:e.username})]})})}))})]})};return Object(h.jsx)("div",{className:"rightbar",children:Object(h.jsx)("div",{className:"rightbarWrapper",children:t?Object(h.jsx)(g,{}):Object(h.jsx)(v,{})})})}s(112);function Y(){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(v,{}),Object(h.jsxs)("div",{className:"homeContainer",children:[Object(h.jsx)(P,{}),Object(h.jsx)(K,{}),Object(h.jsx)(X,{})]})]})}s(113);var Z=function(){var e=Object(B.a)(T.a.mark((function e(t,s){var a;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s({type:"LOGIN_START"}),e.prev=1,e.next=4,U.a.post("/auth/login",t);case 4:void 0!=(a=e.sent).data.email?s({type:"LOGIN_SUCCESS",payload:a.data}):(alert(a.data),s({type:"LOGIN_FAILURE",payload:"sai m\u1eadt kh\u1ea9u"})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),s({type:"LOGIN_FAILURE",payload:e.t0});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,s){return e.apply(this,arguments)}}(),$=s(158),ee=s(6);function te(){var e=Object(a.useRef)(),t=Object(a.useRef)(),s=Object(ee.g)(),c=Object(a.useContext)(x),r=c.isFetching,n=c.dispatch,i=function(){var a=Object(B.a)(T.a.mark((function a(c){return T.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c.preventDefault(),Z({email:e.current.value,password:t.current.value},n),a.next=4,U.a.post("/auth/login",{email:e.current.value,password:t.current.value});case 4:void 0!=a.sent.data.email?s.push("/"):s.push("/login");case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return Object(h.jsx)("div",{className:"login",children:Object(h.jsxs)("div",{className:"loginWrapper",children:[Object(h.jsxs)("div",{className:"loginLeft",children:[Object(h.jsx)("h3",{className:"loginLogo",children:"Lamasocial"}),Object(h.jsx)("span",{className:"loginDesc",children:"Connect with friends and the world around you on Lamasocial."})]}),Object(h.jsx)("div",{className:"loginRight",children:Object(h.jsxs)("form",{className:"loginBox",onSubmit:i,children:[Object(h.jsx)("input",{placeholder:"Email",type:"email",required:!0,className:"loginInput",ref:e}),Object(h.jsx)("input",{placeholder:"Password",type:"password",required:!0,minLength:"6",className:"loginInput",ref:t}),Object(h.jsx)("button",{className:"loginButton",type:"submit",disabled:r,children:r?Object(h.jsx)($.a,{color:"white",size:"20px"}):"Log In"}),Object(h.jsx)("span",{className:"loginForgot",children:"Forgot Password?"}),Object(h.jsx)(j.b,{to:"/register",children:Object(h.jsx)("button",{style:{margin:"0 20%"},className:"loginRegisterButton",children:r?Object(h.jsx)($.a,{color:"white",size:"20px"}):"Create a New Account"})})]})})]})})}s(114);function se(){var e="https://messen.herokuapp.com/images/",t=Object(a.useState)({}),s=Object(d.a)(t,2),c=s[0],r=s[1],n=Object(ee.h)().username;return Object(a.useEffect)((function(){(function(){var e=Object(B.a)(T.a.mark((function e(){var t;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.a.get("/users?username=".concat(n));case 2:t=e.sent,r(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[n]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(v,{}),Object(h.jsxs)("div",{className:"profile",children:[Object(h.jsx)(P,{}),Object(h.jsxs)("div",{className:"profileRight",children:[Object(h.jsxs)("div",{className:"profileRightTop",children:[Object(h.jsxs)("div",{className:"profileCover",children:[Object(h.jsx)("img",{className:"profileCoverImg",src:c.coverPicture?e+c.coverPicture:e+"person/noCover.png",alt:""}),Object(h.jsx)("img",{className:"profileUserImg",src:c.profilePicture?e+c.profilePicture:e+"person/noAvatar.png",alt:""})]}),Object(h.jsxs)("div",{className:"profileInfo",children:[Object(h.jsx)("h4",{className:"profileInfoName",children:c.username}),Object(h.jsx)("span",{className:"profileInfoDesc",children:c.desc})]})]}),Object(h.jsxs)("div",{className:"profileRightBottom",children:[Object(h.jsx)(K,{username:n}),Object(h.jsx)(X,{user:c})]})]})]})]})}s(115);function ae(){var e=Object(a.useRef)(),t=Object(a.useRef)(),s=Object(a.useRef)(),c=Object(a.useRef)(),r=Object(ee.g)(),n=function(){var a=Object(B.a)(T.a.mark((function a(n){var i,o;return T.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n.preventDefault(),c.current.value===s.current.value){a.next=5;break}c.current.setCustomValidity("Passwords don't match!"),a.next=17;break;case 5:return i={username:e.current.value,email:t.current.value,password:s.current.value},a.prev=6,a.next=9,U.a.post("/auth/register",i);case 9:o=a.sent,alert(o.data),r.push("/login"),a.next=17;break;case 14:a.prev=14,a.t0=a.catch(6),alert(a.t0);case 17:case"end":return a.stop()}}),a,null,[[6,14]])})));return function(e){return a.apply(this,arguments)}}();return Object(h.jsx)("div",{className:"login",children:Object(h.jsxs)("div",{className:"loginWrapper",children:[Object(h.jsxs)("div",{className:"loginLeft",children:[Object(h.jsx)("h3",{className:"loginLogo",children:"Lamasocial"}),Object(h.jsx)("span",{className:"loginDesc",children:"Connect with friends and the world around you on Lamasocial."})]}),Object(h.jsx)("div",{className:"loginRight",children:Object(h.jsxs)("form",{className:"loginBox",onSubmit:n,children:[Object(h.jsx)("input",{placeholder:"Username",required:!0,ref:e,className:"loginInput"}),Object(h.jsx)("input",{placeholder:"Email",required:!0,ref:t,className:"loginInput",type:"email"}),Object(h.jsx)("input",{placeholder:"Password",required:!0,ref:s,className:"loginInput",type:"password",minLength:"6"}),Object(h.jsx)("input",{placeholder:"Password Again",required:!0,ref:c,className:"loginInput",type:"password"}),Object(h.jsx)("button",{className:"loginButton",type:"submit",children:"Sign Up"}),Object(h.jsx)(j.b,{to:"/login",children:Object(h.jsx)("button",{style:{margin:"0 20%"},className:"loginRegisterButton",children:"Log in Account"})})]})})]})})}s(116);function ce(e){var t=e.conversation,s=e.currentUser,c=e.convSearch,r=Object(a.useState)(null),n=Object(d.a)(r,2),i=n[0],o=n[1],l="https://messen.herokuapp.com/images/";return Object(a.useEffect)((function(){var e=t.members.find((function(e){return e!==s._id}));(function(){var t=Object(B.a)(T.a.mark((function t(){var s;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,U()("/users?userId="+e);case 3:s=t.sent,o(s.data),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}})()()}),[s,t]),Object(h.jsx)("div",{className:"conversation",children:(null===i||void 0===i?void 0:i.username.includes(c))?Object(h.jsxs)("div",{children:[Object(h.jsx)("img",{className:"conversationImg",src:(null===i||void 0===i?void 0:i.profilePicture)?l+i.profilePicture:l+"person/noAvatar.png",alt:""}),Object(h.jsx)("span",{style:t.status?{color:"red"}:{},className:"conversationName",children:null===i||void 0===i?void 0:i.username})]}):Object(h.jsx)("span",{})})}s(117);function re(e){var t=e.message,s=e.own;return Object(h.jsxs)("div",{className:s?"message own":"message",children:[Object(h.jsxs)("div",{className:"messageTop",children:[Object(h.jsx)("img",{className:"messageImg",src:"http://localhost:8800/images/person/noAvatar.png",alt:""}),Object(h.jsx)("p",{className:"messageText",children:t.text})]}),Object(h.jsx)("div",{className:"messageBottom",children:Object(E.a)(t.createdAt)})]})}s(118);function ne(e){var t=e.userInfor,s=e.currentUser,c="https://messen.herokuapp.com/images/",r=Object(a.useState)({username:""}),n=Object(d.a)(r,2),i=n[0],o=n[1];return Object(a.useEffect)((function(){(function(){var e=Object(B.a)(T.a.mark((function e(){var s;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.a.get("/users/getuser/"+t.userId);case 3:s=e.sent,o(s.data[0]),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(h.jsx)("div",{children:t.userId==s._id?Object(h.jsx)("div",{}):Object(h.jsx)("div",{className:"chatOnline",children:Object(h.jsxs)("div",{className:"chatOnlineFriend",children:[Object(h.jsxs)("div",{className:"chatOnlineImgContainer",children:[Object(h.jsx)("img",{className:"conversationImg",src:(null===t||void 0===t?void 0:t.profilePicture)?c+t.profilePicture:c+"person/noAvatar.png",alt:""}),Object(h.jsx)("div",{className:"chatOnlineBadge"})]}),Object(h.jsx)("span",{className:"chatOnlineName",children:i.username})]})})})}s(119);var ie=s(70);function oe(){Object(a.useRef)();var e=Object(a.useState)({userId:"62c46ce6951a21183c402403",socketId:""}),t=Object(d.a)(e,2),s=t[0],c=(t[1],Object(a.useContext)(x).user),r=Object(a.useState)([]),n=Object(d.a)(r,2),i=n[0],o=n[1],l=Object(a.useState)(null),u=Object(d.a)(l,2),j=u[0],p=u[1],m=Object(a.useState)([]),O=Object(d.a)(m,2),f=O[0],g=O[1],N=Object(a.useState)(""),I=Object(d.a)(N,2),w=I[0],k=I[1],y=Object(a.useRef)(),L=Object(a.useState)([]),C=Object(d.a)(L,2),S=C[0],F=C[1],P=Object(a.useState)(null),_=Object(d.a)(P,2),R=_[0],A=_[1],E=Object(a.useState)(null),D=Object(d.a)(E,2),W=D[0],M=D[1],G=Object(a.useState)(""),V=Object(d.a)(G,2),q=V[0],J=V[1],K=Object(a.useRef)();Object(a.useEffect)((function(){K.current=Object(ie.a)("https://socket-mes.herokuapp.com"),K.current.on("getMessage",(function(e){A({sender:e.senderId,text:e.text,createdAt:Date.now()})})),K.current.on("getConversation",(function(e){M({members:e.members,status:!0,createdAt:Date.now()})}))}),[]);var H=function(){for(var e=i,t=[],s=[],a=0;a<e.length;a++)e[a].status?t.push(e[a]):e[a].status||s.push(e[a]);for(var c=0;c<s.length;c++)t.push(s[c]);return t};Object(a.useEffect)((function(){if(R&&(null===j||void 0===j?void 0:j.members.includes(R.sender))&&g((function(e){return[].concat(Object(b.a)(e),[R])})),R){var e=[];i.map((function(t){t.members.includes(R.sender)&&(t.status=!0),e.push(t)}));for(var t=[],s=[],a=0;a<e.length;a++)e[a].status?t.push(e[a]):e[a].status||s.push(e[a]);for(var r=0;r<s.length;r++)t.push(s[r]);o(t)}if(W&&W.members.includes(c._id)){for(var n=i,l=[W],u=[],d=0;d<n.length;d++)n[d].status?l.push(n[d]):n[d].status||u.push(n[d]);for(var p=0;p<u.length;p++)l.push(u[p]);o(l)}}),[W,R,j]),Object(a.useEffect)((function(){K.current.emit("addUser",c._id),K.current.on("getUsers",(function(e){F(e)}))}),[c]),Object(a.useEffect)((function(){(function(){var e=Object(B.a)(T.a.mark((function e(){var t,s,a,r,n,i;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.a.get("/conversations/"+c._id);case 3:for(t=e.sent,s=t.data,a=[],r=[],n=0;n<s.length;n++)s[n].status?a.push(s[n]):s[n].status||r.push(s[n]);for(i=0;i<r.length;i++)a.push(r[i]);o(a),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}})()()}),[c._id]),Object(a.useEffect)((function(){(function(){var e=Object(B.a)(T.a.mark((function e(){var t;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.a.get("/messages/"+(null===j||void 0===j?void 0:j._id));case 3:t=e.sent,g(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[j]);var z=function(){var e=Object(B.a)(T.a.mark((function e(t){var s,a,r;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),s={sender:c._id,text:w,conversationId:j._id},a=j.members.find((function(e){return e!==c._id})),K.current.emit("sendMessage",{senderId:c._id,receiverId:a,text:w}),e.prev=4,e.next=7,U.a.post("/conversations/update",{id:j._id,status:!0});case 7:return e.sent,e.next=10,U.a.post("/messages",s);case 10:r=e.sent,g([].concat(Object(b.a)(f),[r.data])),k(""),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[4,15]])})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(B.a)(T.a.mark((function e(t){var s,a;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(t),s=i.findIndex((function(e){return e===t})),i[s].status=!1,a=H(),o(a),e.next=8,U.a.post("/conversations/update",{id:t._id,status:!1});case 8:e.sent;case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(B.a)(T.a.mark((function e(t){var s,a,r;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(s=0,e.prev=1,a=0;a<i.length;a++)i[a].members.includes(t)&&(s+=1);if(!(s>0)){e.next=7;break}alert("\u0110\xe3 c\xf3 cov kh\xf4ng call api"),e.next=12;break;case 7:return K.current.emit("CreateConversation",{senderId:c._id,receiver:t}),e.next=10,U.a.post("/conversations",{senderId:c._id,receiverId:t});case 10:r=e.sent,o([].concat(Object(b.a)(i),[r.data]));case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){var e;null===(e=y.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),[f]),Object(h.jsxs)("div",{children:[Object(h.jsx)(v,{}),Object(h.jsxs)("div",{className:"messenger",children:[Object(h.jsx)("div",{className:"chatMenu",children:Object(h.jsxs)("div",{className:"chatMenuWrapper",children:[Object(h.jsx)("input",{placeholder:"Search for friends",className:"chatMenuInput",onChange:function(e){return J(e.target.value)}}),i.map((function(e){return Object(h.jsx)("div",{onClick:function(){return Q(e)},children:Object(h.jsx)(ce,{conversation:e,currentUser:c,convSearch:q})})}))]})}),Object(h.jsx)("div",{className:"chatBox",children:Object(h.jsx)("div",{className:"chatBoxWrapper",children:j?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"chatBoxTop",children:f.map((function(e){return Object(h.jsx)("div",{ref:y,children:Object(h.jsx)(re,{message:e,own:e.sender===c._id})})}))}),Object(h.jsxs)("div",{className:"chatBoxBottom",children:[Object(h.jsx)("textarea",{className:"chatMessageInput",placeholder:"write something...",onChange:function(e){return k(e.target.value)},value:w}),Object(h.jsx)("button",{className:"chatSubmitButton",onClick:z,children:"Send"})]})]}):Object(h.jsx)("span",{className:"noConversationText",children:"Open a conversation to start a chat."})})}),Object(h.jsx)("div",{className:"chatOnline",children:"62c46ce6951a21183c402403"==c._id?Object(h.jsx)("div",{className:"chatOnlineWrapper",children:S.map((function(e){return Object(h.jsx)("div",{onClick:function(){return X(e.userId)},children:Object(h.jsx)(ne,{userInfor:e,currentUser:c})})}))}):Object(h.jsx)("div",{className:"chatOnlineWrapper",children:Object(h.jsx)("div",{onClick:function(){return X(s.userId)},children:Object(h.jsx)(ne,{userInfor:s,currentUser:c})})})})]})]})}var le=function(){var e=Object(a.useContext)(x).user;return Object(h.jsx)(j.a,{children:Object(h.jsxs)(ee.d,{children:[Object(h.jsx)(ee.b,{exact:!0,path:"/",children:e?Object(h.jsx)(Y,{}):Object(h.jsx)(ae,{})}),Object(h.jsxs)(ee.b,{path:"/login",children:[" ",Object(h.jsx)(te,{})]}),Object(h.jsx)(ee.b,{path:"/register",children:Object(h.jsx)(ae,{})}),Object(h.jsx)(ee.b,{path:"/messenger",children:e?Object(h.jsx)(oe,{}):Object(h.jsx)(ee.a,{to:"/"})}),Object(h.jsx)(ee.b,{path:"/profile/:username",children:Object(h.jsx)(se,{})})]})})};n.a.render(Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsx)(f,{children:Object(h.jsx)(le,{})})}),document.getElementById("root"))},76:function(e,t,s){},85:function(e,t,s){},86:function(e,t,s){},88:function(e,t,s){}},[[124,1,2]]]);
//# sourceMappingURL=main.dfe2e4ba.chunk.js.map